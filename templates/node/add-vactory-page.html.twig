<div class="h-full flex flex-col"
     x-data="pageEditor({language: '{{ language }}'})">
    <div x-show="!showBlockForm && !showParagraphBlockForm && !showParagraphViewForm && !showParagraphMultipleForm">
        {# Header with back button, title and actions #}
        {% include "@vactory_dashboard/node/_components/actions.html.twig" with {
            label: 'Create Page'|t
        } %}
    </div>
    {# Notification #}
    {% include "@vactory_dashboard/node/_components/message-notification.html.twig" %}

    <div x-show="!showBlockForm && !showParagraphBlockForm && !showParagraphViewForm && !showParagraphMultipleForm">
        {# Tabs #}
        {% include "@vactory_dashboard/node/_components/tabs.html.twig" %}
    </div>

    {# Node Edit View #}
    <div x-show="!showBlockForm && !showParagraphBlockForm && !showParagraphViewForm && !showParagraphMultipleForm">
        {# Content Tab #}
        <div x-show="activeTab === 'content'" class="flex-1 overflow-y-auto p-3">
            <div class="w-full">

                {% include "@vactory_dashboard/node/_components/add-block-action.html.twig" with {
                    show: true
                } %}

                <div class="space-y-1">
                    {% include "@vactory_dashboard/_components/paragraph/blocks.html.twig" %}
                </div>
            </div>
        </div>

        {# Settings Tab #}
        {% include "@vactory_dashboard/node/_components/settings-form.html.twig" %}

        {# SEO Tab #}
        {% include "@vactory_dashboard/node/_components/seo-form.html.twig" %}

        <div x-show="activeTab === 'banner'">
            {% include "@vactory_dashboard/node/_components/banner-settings.html.twig" %}
        </div>
    </div>

    {# Block Form View #}
    <div x-show="showBlockForm" class="h-full">
        {% include "@vactory_dashboard/_components/paragraph/paragraph-template-form.html.twig" %}
    </div>

    {# Paragraph Block Form View #}
    <div x-show="showParagraphBlockForm" class="h-full">
        {% include "@vactory_dashboard/_components/paragraph/paragraph-block-form.html.twig" %}
    </div>

    {# Paragraph View Form View #}
    <template x-if="showParagraphViewForm" class="h-full">
        {% include "@vactory_dashboard/_components/paragraph/paragraph-view-form.html.twig" %}
    </template>

    {# Paragraph Multiple Form #}
    <template x-if="showParagraphMultipleForm" class="h-full">
        <div>
            {% include "@vactory_dashboard/_components/paragraph/blocks-modal.html.twig" with {'isMultiple': true} %}
            {% include "@vactory_dashboard/_components/paragraph/paragraph-multiple-form.html.twig" %}
        </div>
    </template>

    {# Include the blocks modal #}
    <template x-if="!showParagraphMultipleForm">
        {% include "@vactory_dashboard/_components/paragraph/blocks-modal.html.twig" %}
    </template>
    <template x-if="!showBlockForm && !showParagraphBlockForm && !showParagraphViewForm && !showParagraphMultipleForm">
        {% include "@vactory_dashboard/_components/media/media-library.html.twig" %}
    </template>
</div>